<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<title>Basic Tablesorter Demo</title>
	<script src="js/jquery-2.1.1.min.js"></script>
	<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.19/css/jquery.dataTables.css">
	<script type="text/javascript" charset="utf8"
		src="https://cdn.datatables.net/1.10.19/js/jquery.dataTables.js"></script>


</head>

<body>
	<div class="demo">
		<h1><a href="https://github.com/Mottie/tablesorter">需求<em>任务</em></a></h1>
		<p><a href="https://github.com/Mottie/">新增需求</a>&nbsp;&nbsp;
			<a href="docs/index.html">新增人员</a>
		</p>

		<table class="tablesorter" id="myTable">
			<thead>
				<tr>
					<th>需求号</th>
					<th>需求描述</th>
					<th>开发人员</th>
					<th>状态</th>
					<th>任务类型</th>
					<th>分配日期</th>
					<th>分配者</th>
					<th>操作</th>
				</tr>
			</thead>
			<tbody id="demand-table">
				<!-- <tr><td>abc 123</td><td>&#163;10,40</td><td>Koala</td><td>http://www.google.com</td></tr> -->

			</tbody>
		</table>

		<p>推荐全页面搜索</p>
		<div class="div"></div>



	</div>

	<script>

		var datas = new Array();
		$(document).ready(function () {
			$.ajax({
				url: "http://localhost:8010/all",
				// url:"http://localhost:8010/loan/loans",
				type: 'GET',
				success: function (responsedata) {
					if (responsedata.message == "success") {
						datas = responsedata.data;
						console.log(datas);
						$('#myTable').DataTable({
							data:datas
						});
						// for (var i = 0; i < datas.length; i++) {
						// 	loadTable(datas[i]);
						// }
					}
				},
				error: function (data) {
					alert("错误");
				},
			});
		});
		function loadTable(demandView) {
			// 			//需求号
			var iddemand = demandView.iddemand;
			//     //需求描述
			var topic = demandView.topic;
			//     //需求状态
			var state = demandView.state;
			//     //开发者账户
			var developer = demandView.developer;
			//     // 分配者
			var assigner = demandView.assigner;
			// //    分配日期
			var date = demandView.date;
			// //需求状态
			var type = demandView.type;
			//     //开发者姓名
			var developerName = demandView.developerName;

			const tdHead = "<td>";
			const tdTail = "</td>";
			const trHead = "<tr>";
			const trTail = "</tr>";
			var element = trHead + tdHead + iddemand + tdTail
				+ tdHead + topic + tdTail
				+ tdHead + developerName + tdTail
				+ tdHead + state + tdTail
				+ tdHead + type + tdTail
				+ tdHead + date + tdTail
				+ tdHead + assigner + tdTail
				+ tdHead + '操作' + tdTail;
			$("#demand-table").append(element);
			loadTableData();
		}
		function loadTableData() {


		}

	</script>
</body>

</html>